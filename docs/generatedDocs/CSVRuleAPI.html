<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Class: CSVRuleAPI</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Class: CSVRuleAPI</h1>

    




<section>

<header>
    
        <h2>CSVRuleAPI</h2>
        
            <div class="class-description"><p>This base class describes an API derived classes implement to add Javascript based CSV rules. The only method that must be implemented is <a href="CSVRuleAPI.html#processRecord">CSVRuleAPI.processRecord()</a> which is called by the validator once for each record in the CSV file and is used to examine a record for problems or to modify it. If problems are detected in a record then RuleAPI.error(), RuleAPI.warning(), or RuleAPI.info() should be called with a description of the problem.</p> <p>Derived classes can also implement <a href="CSVRuleAPI.html#start">CSVRuleAPI.start()</a> which is called once by the validator before reading any records. A derived class could implement this to initialize any resources. Similarly derived classes could implement <a href="CSVRuleAPI.html#finish">CSVRuleAPI.finish()</a> which is called once by the validator after the last call to <a href="CSVRuleAPI.html#processRecord">CSVRuleAPI.processRecord()</a>. A derived class could implement this to finalize any resources.</p> <p>This class supports several properties on the configuration object that affect the parsing of CSV files.</p> <ul>     <li>Delimiter - the delimiter character separating fields in a record. Defaults to a commma.</li>     <li>Comment - the comment character. Any text following this character is ignored. Ignored by default.</li>     <li>Escape - the single character used to allow the delimiter character to be used in a field. Defaults to a double quote.</li>     <li>Quote - the single character surrounding fields. Defaults to a double quote.</li> </ul> <p>These properties are shared when reading and writing records but if a rule wants to write rules differently than they were read, for example changing the delimiter, prefixing any of these property names with "Output" (ex. "OutputDelimiter") will set the property on output only.</p></div>
        
    
</header>

<article>
    <div class="container-overview">
    
        

    
    <h2>Constructor</h2>
    

    <h4 class="name" id="CSVRuleAPI"><span class="type-signature"></span>new CSVRuleAPI<span class="signature">(config)</span><span class="type-signature"></span></h4>

    



<div class="description">
    Derived classes must call this from their constructor.
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>config</code></td>
            

            <td class="type">
            
                
<span class="param-type">object</span>


            
            </td>

            

            

            <td class="description last">the config object passed into the derived class's constructor.</td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="api_CSVRuleAPI.js.html">api/CSVRuleAPI.js</a>, <a href="api_CSVRuleAPI.js.html#line30">line 30</a>
    </li></ul></dd>
    

    

    

    
</dl>
















    
    </div>

    

    

    

     

    

    
        <h3 class="subsection-title">Members</h3>

        
            
<h4 class="name" id="processHeaderRows"><span class="type-signature"></span>processHeaderRows<span class="type-signature"></span></h4>




<div class="description">
    Derived classes can implement this method to return true if they need the header rows
</div>







<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="api_CSVRuleAPI.js.html">api/CSVRuleAPI.js</a>, <a href="api_CSVRuleAPI.js.html#line224">line 224</a>
    </li></ul></dd>
    

    

    

    
</dl>






        
    

    
        <h3 class="subsection-title">Methods</h3>

        
            

    

    <h4 class="name" id="finish"><span class="type-signature"></span>finish<span class="signature">()</span><span class="type-signature"></span></h4>

    



<div class="description">
    Derived classes should override this method if they need to do anything after the processing of records is complete.
</div>













<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="api_CSVRuleAPI.js.html">api/CSVRuleAPI.js</a>, <a href="api_CSVRuleAPI.js.html#line146">line 146</a>
    </li></ul></dd>
    

    

    
    <dt class="tag-see">See:</dt>
    <dd class="tag-see">
        <ul>
            <li><a href="CSVRuleAPI.html#start">start</a></li>
        </ul>
    </dd>
    

    
</dl>
















        
            

    

    <h4 class="name" id="getValidatedColumnProperty"><span class="type-signature"></span>getValidatedColumnProperty<span class="signature">(propertyValue, propertyName)</span><span class="type-signature"> &rarr; {number|undefined}</span></h4>

    



<div class="description">
    Given the value of a property this validates whether the given value is a column label or column numberand if so returns the column number otherwise an error is posted to the log and <code>undefined</code> isreturned.
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>propertyValue</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>


            
            </td>

            

            

            <td class="description last">the value of a config column property. If this is <code>undefined</code> then<code>this.config.column</code> is used.</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>propertyName</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>


            
            </td>

            

            

            <td class="description last">the name of the property - used in error messages. Defaults to 'column' if not set.</td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="api_CSVRuleAPI.js.html">api/CSVRuleAPI.js</a>, <a href="api_CSVRuleAPI.js.html#line90">line 90</a>
    </li></ul></dd>
    

    

    

    
</dl>













<h5>Returns:</h5>

        
<div class="param-desc">
    the column number represented by the propertyValue or undefined if the value is not valid.
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">number</span>
|

<span class="param-type">undefined</span>


    </dd>
</dl>

    



        
            

    

    <h4 class="name" id="getValidatedHeaderRows"><span class="type-signature"></span>getValidatedHeaderRows<span class="signature">(headerRowsProperty, headerRowsPropertyName)</span><span class="type-signature"> &rarr; {number|undefined}</span></h4>

    



<div class="description">
    Given the value of a property this validates whether the given value is a valid number of header rowsand if so returns it otherwise an error is posted to the log and <code>0</code> isreturned.
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>headerRowsProperty</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>


            
            </td>

            

            

            <td class="description last">the value of a config header rows property. If this is <code>undefined</code>then <code>this.config.numberOfHeaderRows</code> is used.</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>headerRowsPropertyName</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>


            
            </td>

            

            

            <td class="description last">the name of the property to use in error messages. Defaults to 'numberOfHeaderRows'.</td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="api_CSVRuleAPI.js.html">api/CSVRuleAPI.js</a>, <a href="api_CSVRuleAPI.js.html#line61">line 61</a>
    </li></ul></dd>
    

    

    

    
</dl>













<h5>Returns:</h5>

        
<div class="param-desc">
    the number of header rows given by headerRowsProperty or 0 if the value is not valid.
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">number</span>
|

<span class="param-type">undefined</span>


    </dd>
</dl>

    



        
            

    

    <h4 class="name" id="processRecord"><span class="type-signature"></span>processRecord<span class="signature">(record, rowNumber)</span><span class="type-signature"> &rarr; {array}</span></h4>

    



<div class="description">
    Derived classes should implement this method to process individual records.
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>record</code></td>
            

            <td class="type">
            
                
<span class="param-type">array</span>


            
            </td>

            

            

            <td class="description last">one record from the csv file. Headers are not skipped.</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>rowNumber</code></td>
            

            <td class="type">
            
                
<span class="param-type">integer</span>


            
            </td>

            

            

            <td class="description last">the row number</td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="api_CSVRuleAPI.js.html">api/CSVRuleAPI.js</a>, <a href="api_CSVRuleAPI.js.html#line156">line 156</a>
    </li></ul></dd>
    

    

    

    
</dl>













<h5>Returns:</h5>

        
<div class="param-desc">
    a record, either the original one if no modifications were carried out or a new one.
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">array</span>


    </dd>
</dl>

    



        
            

    

    <h4 class="name" id="start"><span class="type-signature"></span>start<span class="signature">()</span><span class="type-signature"></span></h4>

    



<div class="description">
    Derived classes should override this method if they need to do anything before the processing of the data starts.<br/>Note that rules that use streams and modify the metadata, because of their asynchronous nature, should do soin a <code>start()</code> method. Modifying the metdata any later could mean that the changes are notapplied until after the next rule needs the changes. However rules that use data objects or files are safeto modify metadata at any point, in the <code>start()</code> or <code>finish()</code> methods since theserules would run synchronously.
</div>













<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="api_CSVRuleAPI.js.html">api/CSVRuleAPI.js</a>, <a href="api_CSVRuleAPI.js.html#line138">line 138</a>
    </li></ul></dd>
    

    

    

    
</dl>
















        
    

    

    
</article>

</section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="BaseRuleAPI.html">BaseRuleAPI</a></li><li><a href="CSVRuleAPI.html">CSVRuleAPI</a></li><li><a href="ErrorHandlerAPI.html">ErrorHandlerAPI</a></li><li><a href="MetadataRuleAPI.html">MetadataRuleAPI</a></li><li><a href="RuleAPI.html">RuleAPI</a></li><li><a href="TableParserAPI.html">TableParserAPI</a></li><li><a href="TableRuleAPI.html">TableRuleAPI</a></li></ul><h3>Global</h3><ul><li><a href="global.html#ErrorLogger">ErrorLogger</a></li><li><a href="global.html#fs">fs</a></li><li><a href="global.html#stream">stream</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.4.3</a> on Thu Aug 03 2017 17:05:38 GMT-0400 (DST)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>